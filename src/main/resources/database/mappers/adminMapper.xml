<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.fw.s1.admin.AdminMapper">
	<resultMap type="AdminVO" id="adminAndProduct">
		<id column="adminIdx" property="adminIdx"/>
		<result column="adminDate" property="adminDate"/>
		<result column="productNum" property="productNum"/>
		<result column="sellCount" property="sellCount"/>
		<association property="productVO" javaType="ProductVO">
			<id column="productNum" property="productNum"/>
			<result column="productTitle" property="productTitle"/>
			<result column="productPrice" property="productPrice"/>
			<result column="collab" property="collab"/>
			<result column="productType" property="productType"/>
			<result column="finalPrice" property="finalPrice"/>
		</association>
	</resultMap>

	<select id="saleDay" parameterType="java.lang.String" resultMap="adminAndProduct">
		select a.*, p.* from admin a inner join product p on a.productNum=p.productNum where a.adminDate = #{date}
	</select>
	
	<select id="saleDays" parameterType="java.util.HashMap" resultMap="adminAndProduct">
		select a.*, p.* from admin a inner join product p on a.productNum=p.productNum 
		where a.adminDate between #{start} and #{end}
	</select>

	<insert id="insertAdmin" parameterType="java.util.List">
		insert into admin (adminDate, productNum, sellCount, productType, collab)
		values
		<foreach collection="list" item="item" separator=",">
			(#{item.adminDate}, #{item.productNum}, #{item.sellCount}, #{item.productType}, #{item.collab})
		</foreach>
	</insert>
</mapper>